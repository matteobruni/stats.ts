<!doctype html>
<html>
  <head>
    <title>stats.ts - custom panel example</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
    <style>
      body {
        margin: 0;
        overflow: hidden;
      }
    </style>
  </head>

  <body>
    <script src="../dist/stats.min.js"></script>
    <script>
      const stats = new Stats();

      let x, y;

      const xPanel = stats.addPanel("x", "#b63", 0, () => {
          return {
            value: x,
            maxValue: 460,
          };
        }),
        yPanel = stats.addPanel("y", "#a3a", 0, () => {
          return {
            value: y,
            maxValue: 460,
          };
        });

      stats.showPanel(3);

      document.body.appendChild(stats.dom);

      const canvas = document.createElement("canvas");

      canvas.width = 512;
      canvas.height = 512;

      document.body.appendChild(canvas);

      const context = canvas.getContext("2d");

      context.fillStyle = "rgba(127,0,255,0.05)";

      const test = [];

      function animate() {
        const time = performance.now() / 1000;

        context.clearRect(0, 0, 512, 512);

        stats.begin();

        for (let i = 0; i < 2000; i++) {
          x = Math.cos(time + i * 0.01) * 196 + 256;
          y = Math.sin(time + i * 0.01234) * 196 + 256;

          context.beginPath();
          context.arc(x, y, 10, 0, Math.PI * 2, true);
          context.fill();
        }

        stats.end();

        requestAnimationFrame(animate);
      }

      animate();
    </script>
  </body>
</html>
